{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\circo\\\\OneDrive\\\\Documentos\\\\repos\\\\examen ml\\\\TestML\\\\components\\\\Autocomplete.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\nimport styled from 'styled-components';\n\nfunction sleep(delay = 0) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\nexport default function AutocompleteWrapper({\n  optionSelected\n}) {\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: options,\n    1: setOptions\n  } = useState([]);\n  const loading = open && options.length === 0;\n  useEffect(() => {\n    let active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    return () => {\n      active = false;\n    };\n  }, [loading]);\n\n  const handleChange = async e => {\n    if (e.target.value && e.target.value !== \"\") {\n      const {\n        data\n      } = await axios(`/api/autosuggest?q=${e.target.value}`);\n      await sleep(1e3);\n      const autosuggest = await data.suggestions;\n      setOptions(autosuggest.map(key => {\n        return {\n          name: key.q\n        };\n      }));\n      console.log(options);\n    }\n  };\n\n  const goToProduct = e => {\n    optionSelected(e);\n  };\n\n  useEffect(() => {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n  return __jsx(SearchComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: \"https://http2.mlstatic.com/frontend-assets/ui-navigation/5.14.3/mercadolibre/logo__large_plus.png\",\n    height: \"34\",\n    width: \"134\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), __jsx(Autocomplete, {\n    id: \"autocomplete\",\n    open: open,\n    style: {\n      padding: '7px 60px 9px 15px',\n      borderRadius: '2px',\n      backgroundColor: '#fff',\n      border: '0 rgba(0,0,0,.2)',\n      width: 300,\n      background: 'white'\n    },\n    onOpen: () => {\n      setOpen(true);\n    },\n    onClose: () => {\n      setOpen(false);\n    },\n    getOptionSelected: (option, value) => {\n      goToProduct(option.name);\n      return option.name === value.name;\n    },\n    getOptionLabel: option => option.name,\n    onInputChange: handleChange,\n    options: options,\n    loading: loading,\n    popupIcon: null,\n    renderInput: params => __jsx(\"div\", {\n      ref: params.InputProps.ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }, __jsx(\"input\", _extends({\n      style: {\n        width: 300,\n        border: 'none'\n      },\n      type: \"text\"\n    }, params.inputProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }));\n}\nconst SearchComponent = styled.div`\n    background-color: #fff159;\n    display: flex;\n    justify-content: center; \n    align-items: center;\n    padding: 5px;\n`;\nconst InputWrapper = styled.input``;","map":{"version":3,"sources":["C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/components/Autocomplete.js"],"names":["React","useState","useEffect","axios","TextField","Autocomplete","styled","sleep","delay","Promise","resolve","setTimeout","AutocompleteWrapper","optionSelected","open","setOpen","options","setOptions","loading","length","active","undefined","handleChange","e","target","value","data","autosuggest","suggestions","map","key","name","q","console","log","goToProduct","padding","borderRadius","backgroundColor","border","width","background","option","params","InputProps","ref","inputProps","SearchComponent","div","InputWrapper","input"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\r\nimport styled from 'styled-components'\r\n\r\nfunction sleep(delay = 0) {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, delay);\r\n    });\r\n}\r\n\r\nexport default function AutocompleteWrapper({ optionSelected }) {\r\n    const [open, setOpen] = useState(false);\r\n    const [options, setOptions] = useState([]);\r\n    const loading = open && options.length === 0;\r\n\r\n    useEffect(() => {\r\n        let active = true;\r\n\r\n        if (!loading) {\r\n            return undefined;\r\n        }\r\n        return () => {\r\n            active = false;\r\n        };\r\n    }, [loading]);\r\n\r\n    const handleChange = async (e) => {\r\n        if (e.target.value && e.target.value !== \"\") {\r\n            const { data } = await axios(`/api/autosuggest?q=${e.target.value}`)\r\n            await sleep(1e3)\r\n            const autosuggest = await data.suggestions;\r\n            setOptions(autosuggest.map((key) => { return { name: key.q } }));\r\n            console.log(options)\r\n        }\r\n    }\r\n\r\n    const goToProduct = (e) => {\r\n        optionSelected(e)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!open) {\r\n            setOptions([]);\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <SearchComponent>\r\n            <img src='https://http2.mlstatic.com/frontend-assets/ui-navigation/5.14.3/mercadolibre/logo__large_plus.png' height='34' width='134' />\r\n            <Autocomplete\r\n                id=\"autocomplete\"\r\n                open={open}\r\n                style={{\r\n                    padding: '7px 60px 9px 15px',\r\n                    borderRadius: '2px',\r\n                    backgroundColor: '#fff',\r\n                    border: '0 rgba(0,0,0,.2)',\r\n                    width: 300,\r\n                    background: 'white'\r\n                }}\r\n                onOpen={() => {\r\n                    setOpen(true);\r\n                }}\r\n                onClose={() => {\r\n                    setOpen(false);\r\n                }}\r\n                getOptionSelected={(option, value) => {\r\n                    goToProduct(option.name)\r\n                    return option.name === value.name\r\n                }}\r\n                getOptionLabel={(option) => option.name}\r\n                onInputChange={handleChange}\r\n                options={options}\r\n                loading={loading}\r\n                popupIcon={null}\r\n                renderInput={(params) => (\r\n                    <div ref={params.InputProps.ref}>\r\n                        <input style={{ width: 300, border: 'none' }} type=\"text\" {...params.inputProps} />\r\n                    </div>\r\n                )}\r\n            />\r\n        </SearchComponent>\r\n    );\r\n}\r\n\r\n\r\nconst SearchComponent = styled.div`\r\n    background-color: #fff159;\r\n    display: flex;\r\n    justify-content: center; \r\n    align-items: center;\r\n    padding: 5px;\r\n`\r\nconst InputWrapper = styled.input`` "]},"metadata":{},"sourceType":"module"}