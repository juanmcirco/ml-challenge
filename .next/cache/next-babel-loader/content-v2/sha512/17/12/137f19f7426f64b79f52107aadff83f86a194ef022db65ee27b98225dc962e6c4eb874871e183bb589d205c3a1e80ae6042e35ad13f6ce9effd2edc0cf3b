{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\circo\\\\OneDrive\\\\Documentos\\\\repos\\\\examen ml\\\\TestML\\\\components\\\\Searchbox.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\nimport styled from 'styled-components';\nimport { useCookies } from \"react-cookie\";\nexport default function Searchbox(_ref) {\n  _s();\n\n  var _this = this;\n\n  var optionSelected = _ref.optionSelected;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState([]),\n      options = _useState2[0],\n      setOptions = _useState2[1];\n\n  var loading = open && options.length === 0;\n\n  var _useCookies = useCookies([\"LastSearch\"]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  useEffect(function () {\n    var active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    return function () {\n      active = false;\n    };\n  }, [loading]);\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _yield$axios, data, autosuggest;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(e.target.value && e.target.value !== \"\")) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 3;\n              return axios(\"/api/autosuggest?q=\".concat(e.target.value));\n\n            case 3:\n              _yield$axios = _context.sent;\n              data = _yield$axios.data;\n              _context.next = 7;\n              return data.suggestions;\n\n            case 7:\n              autosuggest = _context.sent;\n              setOptions(autosuggest.map(function (key) {\n                return {\n                  name: key.q\n                };\n              }));\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleChange(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var goToProduct = function goToProduct(e) {\n    optionSelected(e);\n    setCookie(\"LastSearch\", e);\n  };\n\n  useEffect(function () {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n  return __jsx(React.Fragment, null, options.length >= 1 && __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 31\n    }\n  }, options.map(function (value) {\n    return __jsx(Suggestion, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 33\n      }\n    }, value.name);\n  })), __jsx(InputWrapper, {\n    type: \"text\",\n    placeholder: \"Nunca dejes de buscar\",\n    onChange: handleChange,\n    style: {\n      paddingLeft: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Searchbox, \"wkvGtDWaw3Oq0kv1qJwRk6lPfAc=\", false, function () {\n  return [useCookies];\n});\n\n_c = Searchbox;\nvar InputWrapper = styled.input.withConfig({\n  displayName: \"Searchbox__InputWrapper\",\n  componentId: \"sc-1gbjbu6-0\"\n})([\"padding:7px 60px 9px 15px;-webkit-border-radius:2px;border-radius:2px;background-color:#fff;border:0 rgba(0,0,0,.2);display:flex;flex-grow:1;:focus{outline:-webkit-focus-ring-color auto 0px !important;}\"]);\n_c2 = InputWrapper;\nvar AutocompleteWrapper = styled(Autocomplete).withConfig({\n  displayName: \"Searchbox__AutocompleteWrapper\",\n  componentId: \"sc-1gbjbu6-1\"\n})([\"display:flex;flex-grow:1;div{display:flex;flex-grow:1;}\"]);\nvar SuggestionContainer = styled.ul.withConfig({\n  displayName: \"Searchbox__SuggestionContainer\",\n  componentId: \"sc-1gbjbu6-2\"\n})([\"display:flex;flex-direction:row;\"]);\nvar Suggestion = styled.li.withConfig({\n  displayName: \"Searchbox__Suggestion\",\n  componentId: \"sc-1gbjbu6-3\"\n})([\"display:flex;\"]);\n_c3 = Suggestion;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Searchbox\");\n$RefreshReg$(_c2, \"InputWrapper\");\n$RefreshReg$(_c3, \"Suggestion\");","map":{"version":3,"sources":["C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/components/Searchbox.js"],"names":["React","useState","useEffect","axios","Autocomplete","styled","useCookies","Searchbox","optionSelected","open","setOpen","options","setOptions","loading","length","cookies","setCookie","active","undefined","handleChange","e","target","value","data","suggestions","autosuggest","map","key","name","q","goToProduct","paddingLeft","InputWrapper","input","AutocompleteWrapper","SuggestionContainer","ul","Suggestion","li"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\r\nimport styled from 'styled-components'\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nexport default function Searchbox({ optionSelected }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [options, setOptions] = useState([]);\r\n  const loading = open && options.length === 0;\r\n  const [cookies, setCookie] = useCookies([\"LastSearch\"]);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n\r\n    if (!loading) {\r\n      return undefined;\r\n    }\r\n\r\n\r\n\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [loading]);\r\n\r\n  const handleChange = async (e) => {\r\n    if (e.target.value && e.target.value !== \"\") {\r\n      const { data } = await axios(`/api/autosuggest?q=${e.target.value}`)\r\n      const autosuggest = await data.suggestions;\r\n      setOptions(autosuggest.map((key) => { return { name: key.q } }));\r\n    }\r\n  }\r\n\r\n  const goToProduct = (e) => {\r\n    optionSelected(e)\r\n    setCookie(\"LastSearch\", e);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setOptions([]);\r\n    }\r\n  }, [open]);\r\n\r\n  return (\r\n    <>\r\n      {options.length >= 1 && <ul>\r\n        {options.map((value) => <Suggestion>{value.name}</Suggestion>)}\r\n      </ul>\r\n      }\r\n      <InputWrapper type=\"text\" placeholder=\"Nunca dejes de buscar\" onChange={handleChange} style={{ paddingLeft: 20 }} />\r\n    </>\r\n  );\r\n}\r\n\r\nconst InputWrapper = styled.input`\r\n    padding: 7px 60px 9px 15px;\r\n    -webkit-border-radius: 2px;\r\n    border-radius: 2px;\r\n    background-color: #fff;\r\n    border: 0 rgba(0,0,0,.2);\r\n    //margin: 0 30px;\r\n    display: flex;\r\n    flex-grow: 1;\r\n    :focus {\r\n    outline: -webkit-focus-ring-color auto 0px !important;\r\n}\r\n`\r\n\r\nconst AutocompleteWrapper = styled(Autocomplete)`\r\n    display: flex;\r\n    flex-grow: 1;\r\n    div{\r\n        display: flex;\r\n        flex-grow: 1;\r\n    }\r\n`\r\nconst SuggestionContainer = styled.ul`\r\n  display: flex; \r\n  flex-direction: row;\r\n`\r\nconst Suggestion = styled.li`\r\n  display: flex; \r\n`"]},"metadata":{},"sourceType":"module"}