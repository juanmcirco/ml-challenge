{"ast":null,"code":"import _taggedTemplateLiteral from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _extends from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\circo\\\\OneDrive\\\\Documentos\\\\repos\\\\examen ml\\\\TestML\\\\components\\\\Searchbox.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-grow: 1;\\n    div{\\n        display: flex;\\n        flex-grow: 1;\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 7px 60px 9px 15px;\\n    -webkit-border-radius: 2px;\\n    border-radius: 2px;\\n    background-color: #fff;\\n    border: 0 rgba(0,0,0,.2);\\n    margin: 0 30px;\\n    display: flex;\\n    flex-grow: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\nimport styled from 'styled-components';\nimport { useCookies } from \"react-cookie\";\n\nfunction sleep() {\n  var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n}\n\nexport default function Searchbox(_ref) {\n  _s();\n\n  var _this = this;\n\n  var optionSelected = _ref.optionSelected;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState([]),\n      options = _useState2[0],\n      setOptions = _useState2[1];\n\n  var loading = open && options.length === 0;\n\n  var _useCookies = useCookies([\"LastSearch\"]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  useEffect(function () {\n    var active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, countries;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('https://country.register.gov.uk/records.json?page-size=5000');\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return sleep(1e3);\n\n            case 5:\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              countries = _context.sent;\n\n              if (active) {\n                setOptions(Object.keys(countries).map(function (key) {\n                  return countries[key].item[0];\n                }));\n              }\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n\n    return function () {\n      active = false;\n    };\n  }, [loading]);\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var _yield$axios, data, autosuggest;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(e.target.value && e.target.value !== \"\")) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 3;\n              return axios(\"/api/autosuggest?q=\".concat(e.target.value));\n\n            case 3:\n              _yield$axios = _context2.sent;\n              data = _yield$axios.data;\n              _context2.next = 7;\n              return sleep(1e3);\n\n            case 7:\n              _context2.next = 9;\n              return data.suggestions;\n\n            case 9:\n              autosuggest = _context2.sent;\n              setOptions(autosuggest.map(function (key) {\n                return {\n                  name: key.q\n                };\n              }));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChange(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var goToProduct = function goToProduct(e) {\n    optionSelected(e);\n    setCookie(\"LastSearch\", e);\n  };\n\n  useEffect(function () {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n  return __jsx(AutocompleteWrapper, {\n    id: \"autocomplete\",\n    open: open,\n    onOpen: function onOpen() {\n      setOpen(true);\n    },\n    onClose: function onClose() {\n      setOpen(false);\n    },\n    getOptionSelected: function getOptionSelected(option, value) {\n      goToProduct(option.name);\n      return option.name === value.name;\n    },\n    getOptionLabel: function getOptionLabel(option) {\n      return option.name;\n    },\n    onInputChange: handleChange,\n    options: options,\n    loading: loading,\n    loadingText: 'Cargando',\n    popupIcon: null,\n    renderInput: function renderInput(params) {\n      return __jsx(\"div\", {\n        ref: params.InputProps.ref,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }, __jsx(InputWrapper, _extends({\n        type: \"search\"\n      }, params.inputProps, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }\n      })));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  });\n}\n\n_s(Searchbox, \"wkvGtDWaw3Oq0kv1qJwRk6lPfAc=\", false, function () {\n  return [useCookies];\n});\n\n_c = Searchbox;\nvar InputWrapper = styled.input(_templateObject());\n_c2 = InputWrapper;\nvar AutocompleteWrapper = styled(Autocomplete)(_templateObject2());\n_c3 = AutocompleteWrapper;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Searchbox\");\n$RefreshReg$(_c2, \"InputWrapper\");\n$RefreshReg$(_c3, \"AutocompleteWrapper\");","map":{"version":3,"sources":["C:/Users/circo/OneDrive/Documentos/repos/examen ml/TestML/components/Searchbox.js"],"names":["React","useState","useEffect","axios","TextField","Autocomplete","styled","useCookies","sleep","delay","Promise","resolve","setTimeout","Searchbox","optionSelected","open","setOpen","options","setOptions","loading","length","cookies","setCookie","active","undefined","fetch","response","json","countries","Object","keys","map","key","item","handleChange","e","target","value","data","suggestions","autosuggest","name","q","goToProduct","option","params","InputProps","ref","inputProps","InputWrapper","input","AutocompleteWrapper"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete/Autocomplete';\r\nimport styled from 'styled-components'\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nfunction sleep(delay = 0) {\r\n    return new Promise((resolve) => {\r\n        setTimeout(resolve, delay);\r\n    });\r\n}\r\n\r\nexport default function Searchbox({ optionSelected }) {\r\n    const [open, setOpen] = useState(false);\r\n    const [options, setOptions] = useState([]);\r\n    const loading = open && options.length === 0;\r\n    const [cookies, setCookie] = useCookies([\"LastSearch\"]);\r\n\r\n    useEffect(() => {\r\n        let active = true;\r\n\r\n        if (!loading) {\r\n            return undefined;\r\n        }\r\n        (async () => {\r\n            const response = await fetch('https://country.register.gov.uk/records.json?page-size=5000');\r\n            await sleep(1e3); // For demo purposes.\r\n            const countries = await response.json();\r\n\r\n            if (active) {\r\n                setOptions(Object.keys(countries).map((key) => countries[key].item[0]));\r\n            }\r\n        })();\r\n        return () => {\r\n            active = false;\r\n        };\r\n    }, [loading]);\r\n\r\n    const handleChange = async (e) => {\r\n        if (e.target.value && e.target.value !== \"\") {\r\n            const { data } = await axios(`/api/autosuggest?q=${e.target.value}`)\r\n\r\n            await sleep(1e3)\r\n            const autosuggest = await data.suggestions;\r\n            setOptions(autosuggest.map((key) => { return { name: key.q } }));\r\n        }\r\n    }\r\n\r\n    const goToProduct = (e) => {\r\n        optionSelected(e)\r\n        setCookie(\"LastSearch\", e);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!open) {\r\n            setOptions([]);\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <AutocompleteWrapper\r\n            id=\"autocomplete\"\r\n            open={open}\r\n            onOpen={() => {\r\n                setOpen(true);\r\n            }}\r\n            onClose={() => {\r\n                setOpen(false);\r\n            }}\r\n            getOptionSelected={(option, value) => {\r\n                goToProduct(option.name)\r\n                return option.name === value.name\r\n            }}\r\n            getOptionLabel={(option) => option.name}\r\n            onInputChange={handleChange}\r\n            options={options}\r\n            loading={loading}\r\n            loadingText={'Cargando'}\r\n            popupIcon={null}\r\n            renderInput={(params) => (\r\n                <div ref={params.InputProps.ref}>\r\n                    <InputWrapper type=\"search\" {...params.inputProps} />\r\n                </div>\r\n            )}\r\n        />\r\n\r\n    );\r\n}\r\n\r\nconst InputWrapper = styled.input`\r\n    padding: 7px 60px 9px 15px;\r\n    -webkit-border-radius: 2px;\r\n    border-radius: 2px;\r\n    background-color: #fff;\r\n    border: 0 rgba(0,0,0,.2);\r\n    margin: 0 30px;\r\n    display: flex;\r\n    flex-grow: 1;\r\n`\r\n\r\nconst AutocompleteWrapper = styled(Autocomplete)`\r\n    display: flex;\r\n    flex-grow: 1;\r\n    div{\r\n        display: flex;\r\n        flex-grow: 1;\r\n    }\r\n`"]},"metadata":{},"sourceType":"module"}